<!-- <button mat-raised-button color="primary" (click)="setIsAddChallenge()">Add Challenge</button>
@if(isAddChallenge){
    <form [formGroup]="challengeForm" (ngSubmit)="onSubmitAddChallenge()">
        <mat-card>
            <mat-card-title class="center-title">Add Lesson</mat-card-title>
            <mat-card-content>
                <mat-form-field appearance="fill">
                    <mat-label for="title">title</mat-label>
                    <input matInput id="title" formControlName="title" required>
                    @if (challenge['title']&&challenge['title'].errors &&challenge['title'].touched) {
                    @if(challenge['title'].errors['required']) {
                    <mat-error>Title is required</mat-error>
                    }
                    @if(challenge["title"].errors["minlength"]) {
                    <mat-error>Title must be at least 4 characters</mat-error>
                    }
                    @if(challenge["title"].errors["maxlength"]) {
                    <mat-error>Title must be at most 8 characters</mat-error>
                    }
                    }
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label for="description">description:</mat-label>
                    <textarea matInput id="description" formControlName="description" rows="4" required></textarea>

                    @if (challenge['description']&&challenge['description'].errors &&challenge['description'].touched) {
                    @if(challenge['description'].errors["required"]) {
                    <mat-error>Description is required</mat-error>
                    }
                    @if(challenge["description"].errors["minlength"]) {
                    <mat-error>Description must be at least 15 characters</mat-error>
                    }
                    }
                </mat-form-field>
            </mat-card-content>
            <mat-card-actions class="center-actions">
                <button mat-raised-button color="primary" type="submit"
                    [disabled]="challengeForm.invalid">Submit</button>
            </mat-card-actions>
        </mat-card>
    </form>
}
<mat-accordion>
@for(currentChallenge of (allChallenges$|async);track $index){
    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                {{currentChallenge.title}} 
            </mat-panel-title>
            @if(currentChallenge.startDate && currentChallenge.endDate){
                <span>
                    {{ isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'Active' : 'Not Active' }}
                </span>
            }
       From:{{currentChallenge.startDate| date:'MMMM d, y'}}-{{currentChallenge.endDate| date:'MMMM d, y'}}
        </mat-expansion-panel-header>
        {{currentChallenge.description}} 
    </mat-expansion-panel>
}
</mat-accordion> -->


<!-- 

<div class="challenges-container">
  <div class="challenges-content">
    
 
    <div class="challenge-list">
      <div class="section-header">
        <h2 class="section-title">
          <span class="title-icon">🎯</span>
          Challenge Board
        </h2>
        
        <div class="challenge-stats">
          <div class="stat-badge">
            <span class="stat-number">12</span>
            <span class="stat-label">Active</span>
          </div>
          <div class="stat-badge">
            <span class="stat-number">45</span>
            <span class="stat-label">Total</span>
          </div>
        </div>
      </div>
      
      <mat-accordion>
        @for(currentChallenge of (allChallenges$|async);track $index){
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{currentChallenge.title}} 
              </mat-panel-title>
              <div class="panel-subtitle">
                @if(currentChallenge.startDate && currentChallenge.endDate){
                  <span class="status-badge" [ngClass]="isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'active' : 'inactive'">
                    {{isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'Live Now' : 'Ended'}}
                  </span>
                }
                <span class="date-range">
                  {{currentChallenge.startDate| date:'MMM d'}} - {{currentChallenge.endDate| date:'MMM d, y'}}
                </span>
              </div>
            </mat-expansion-panel-header>
            <div class="challenge-description">
              {{currentChallenge.description}} 
            </div>
          </mat-expansion-panel>
        }
      </mat-accordion>
    </div> -->

    
    <!-- <div class="challenge-form">
      <div class="form-container">
        <form [formGroup]="challengeForm" (ngSubmit)="onSubmitAddChallenge()">
          
         
          <div class="form-header">
            <div class="form-icon">✨</div>
            <h3 class="form-title">Create Challenge</h3>
            <p class="form-subtitle">Launch a new creative battle</p>
          </div>
          
    
          <div class="form-content">
            <mat-form-field appearance="fill">
              <mat-label>Challenge Title</mat-label>
              <input matInput 
                     id="title" 
                     formControlName="title" 
                     placeholder="Enter an inspiring title"
                     required>
              @if (challenge['title']&&challenge['title'].errors &&challenge['title'].touched) {
                @if(challenge['title'].errors['required']) {
                  <mat-error>Challenge title is required</mat-error>
                }
                @if(challenge["title"].errors["minlength"]) {
                  <mat-error>Title must be at least 4 characters</mat-error>
                }
              }
            </mat-form-field>
            
            <mat-form-field appearance="fill">
              <mat-label>Challenge Description</mat-label>
              <textarea matInput 
                        id="description" 
                        formControlName="description" 
                        placeholder="Describe the creative challenge in detail..."
                        rows="4" 
                        required></textarea>
              @if (challenge['description']&&challenge['description'].errors &&challenge['description'].touched) {
                @if(challenge['description'].errors["required"]) {
                  <mat-error>Description is required</mat-error>
                }
                @if(challenge["description"].errors["minlength"]) {
                  <mat-error>Description is required</mat-error>
                }
              }
            </mat-form-field>
          </div>
          
     
          <div class="form-actions">
            <button type="submit" 
                    class="submit-button"
                    [disabled]="challengeForm.invalid">
              🚀 Launch Challenge
            </button>
          </div>
          
   
          <div class="form-footer">
            <p class="footer-text">
              <span>💡</span>
              Challenge will be reviewed before going live
            </p>
          </div>
          
        </form>
      </div>
    </div>
    
  </div> -->
<!-- ////////////////למעלה V0 הראשון למטה הטוב של רחלי////////////////////////////// -->
  
<div class="container">
   
    <div class="challenge-list">
        <h2>Challenge Board</h2>
        <mat-accordion>
            @for(currentChallenge of (allChallenges$|async);track $index){
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{currentChallenge.title}} 
                        </mat-panel-title>
                        <div class="panel-subtitle">
                            @if(currentChallenge.startDate && currentChallenge.endDate){
                                <span class="status-badge" [ngClass]="isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'active' : 'inactive'">
                                    {{isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'Active' : 'Not Active'}}
                                </span>
                            }
                            <span class="date-range">
                                From: {{currentChallenge.startDate| date:'MMMM d, y'}} - Till: {{currentChallenge.endDate| date:'MMMM d, y'}}
                            </span>
                        </div>
                    </mat-expansion-panel-header>
                    <div class="challenge-description">
                        {{currentChallenge.description}} 
                    </div>
                </mat-expansion-panel>
            }
        </mat-accordion>
    </div>

   
    <div class="challenge-form">
       
        <div class="form-decoration decoration-circle-1"></div>
        <div class="form-decoration decoration-circle-2"></div>
        
        <form [formGroup]="challengeForm" (ngSubmit)="onSubmitAddChallenge()">
            <mat-card>
                
                <div class="form-ribbon"></div>
                
              
                <div class="form-title-container">
                    <h2 class="form-title">Create New Challenge</h2>
                    <p class="form-subtitle">Share your exciting challenge with the community</p>
                </div>
                
                
                <div class="form-content">
                    <mat-card-content>
                        <mat-form-field appearance="fill">
                            <mat-label for="title">Challenge Title</mat-label>
                            <input matInput id="title" formControlName="title" placeholder="Enter an engaging title" required>
                            @if (challenge['title']&&challenge['title'].errors &&challenge['title'].touched) {
                                @if(challenge['title'].errors['required']) {
                                    <mat-error>Title is required</mat-error>
                                }
                                @if(challenge["title"].errors["minlength"]) {
                                    <mat-error>Title must be at least 4 characters</mat-error>
                                }
                                @if(challenge["title"].errors["maxlength"]) {
                                    <mat-error>Title must be at most 8 characters</mat-error>
                                }
                            }
                        </mat-form-field>
                        
                        <mat-form-field appearance="fill">
                            <mat-label for="description">Challenge Description</mat-label>
                            <textarea matInput id="description" formControlName="description" 
                                      placeholder="Describe what this challenge is about" rows="4" required></textarea>
                            @if (challenge['description']&&challenge['description'].errors &&challenge['description'].touched) {
                                @if(challenge['description'].errors["required"]) {
                                    <mat-error>Description is required</mat-error>
                                }
                                @if(challenge["description"].errors["minlength"]) {
                                    <mat-error>Description must be at least 15 characters</mat-error>
                                }
                            }
                        </mat-form-field>
                    </mat-card-content>
                    
                
                    <mat-card-actions>
                        <div class="button-container">
                            <button mat-raised-button type="submit" class="pink-button"
                                    [disabled]="challengeForm.invalid">Create Challenge</button>
                        </div>
                    </mat-card-actions>
                    
                   
                    <div class="form-footer">
                        <p>Your challenge will appear on the board after review</p>
                    </div>
                </div>
            </mat-card>
        </form>
    </div>
</div>
<!-- 
<div class="container">
    <div class="challenge-list">
        <h2>Challenge Board</h2>
        <mat-accordion>
            @for(currentChallenge of (allChallenges$|async);track $index){
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{currentChallenge.title}} 
                        </mat-panel-title>
                        <div class="panel-subtitle">
                            @if(currentChallenge.startDate && currentChallenge.endDate){
                                <span class="status-badge" [ngClass]="isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'active' : 'inactive'">
                                    {{isChallengeActive(currentChallenge.startDate, currentChallenge.endDate) ? 'Active' : 'Not Active'}}
                                </span>
                            }
                            <span class="date-range">
                                From: {{currentChallenge.startDate| date:'MMMM d, y'}} - Till: {{currentChallenge.endDate| date:'MMMM d, y'}}
                            </span>
                        </div>
                    </mat-expansion-panel-header>
                    <div class="challenge-description">
                        {{currentChallenge.description}} 
                    </div>
                </mat-expansion-panel>
            }
        </mat-accordion>
    </div>

    <div class="challenge-form">
        <form [formGroup]="challengeForm" (ngSubmit)="onSubmitAddChallenge()">
            <mat-card>
                <mat-card-title>Create New Challenge</mat-card-title>
                <mat-card-content>
                    <mat-form-field appearance="fill">
                        <mat-label for="title">Challenge Title</mat-label>
                        <input matInput id="title" formControlName="title" placeholder="Enter an engaging title" required>
                        @if (challenge['title']&&challenge['title'].errors &&challenge['title'].touched) {
                            @if(challenge['title'].errors['required']) {
                                <mat-error>Title is required</mat-error>
                            }
                            @if(challenge["title"].errors["minlength"]) {
                                <mat-error>Title must be at least 4 characters</mat-error>
                            }
                            @if(challenge["title"].errors["maxlength"]) {
                                <mat-error>Title must be at most 8 characters</mat-error>
                            }
                        }
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label for="description">Challenge Description</mat-label>
                        <textarea matInput id="description" formControlName="description" 
                                  placeholder="Describe what this challenge is about" rows="4" required></textarea>
                        @if (challenge['description']&&challenge['description'].errors &&challenge['description'].touched) {
                            @if(challenge['description'].errors["required"]) {
                                <mat-error>Description is required</mat-error>
                            }
                            @if(challenge["description"].errors["minlength"]) {
                                <mat-error>Description must be at least 15 characters</mat-error>
                            }
                        }
                    </mat-form-field>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-raised-button color="primary" type="submit"
                            [disabled]="challengeForm.invalid">CREATE CHALLENGE</button>
                </mat-card-actions>
            </mat-card>
        </form>
    </div>
 
    
</div> -->